{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Genomics Platform Documentation Topics HPC Access : login and file transfer to LIMS-HPC HPC Archiving and Update Slides : Slides to go with the following documents HPC Archiving : usage of LIMS-HPC Archiving facilities HPC Updates : changes to LIMS-HPC usage","title":"Home"},{"location":"#genomics-platform-documentation","text":"","title":"Genomics Platform Documentation"},{"location":"#topics","text":"HPC Access : login and file transfer to LIMS-HPC HPC Archiving and Update Slides : Slides to go with the following documents HPC Archiving : usage of LIMS-HPC Archiving facilities HPC Updates : changes to LIMS-HPC usage","title":"Topics"},{"location":"hpc-access/","text":"em {font-style: normal; font-family: courier new;} HPC Access Applying for an account User = task to be completed by LTU Staff/Student requiring access to LIMS-HPC. Lab-head = task to be completed by the LTU lab-head for the lab which user belongs to. User to carefully read archive documentation: Archive Documentation User to carefully read, sign and give to supervisor archive access form: Archive Access Form Lab-head to complete an AskICT \"Unix Research Support\" request (Click AskICT Get Help Research Support Unix Research Support) from AskLaTrobe if User is a staff member select \"Who requires this service?\" = \"Someone Else\" and \"Type their name in the \"Select the staff member for this server box\". For students just leave it as \"Yourself\" Click \"Add attachments\" and select the Archive Access Form provided by User Complete the \"Description of request\" using the template below and the following replacements: FIRSTNAME : user's first/given name NAME : full name of user USERNAME : if the user is a student then this must be their STUDENTS domain username. Otherwise, their LTU domain username. EMAIL : the user's LTU/STUDENTS email address. Optionally you can provide a second alternate email if they want. LABGROUP : Lab-head's surname followed by \"lab\" e.g. smithlab New LIMS-HPC user for FIRSTNAME Name: NAME Username: USERNAME Email: EMAIL Group: LABGROUP Figure : Description of request template Connecting Click the link below to expand the relevant instructions for your Operating System Mac OS X / Linux Both Mac OS X and Linux come with a version of ssh (called OpenSSH) that can be used from the command line. To use OpenSSH you must first start a terminal program on your computer. On OS X the standard terminal is called Terminal, and it is installed by default. On Linux there are many popular terminal programs including: xterm, gnome-terminal, konsole (if you aren't sure, then xterm is a good default). When you've started the terminal you should see a command prompt. To log into LIMS-HPC, for example, type this command at the prompt and press return (where the word username is replaced with your LIMS-HPC username): $ ssh -p 6022 username@lims-hpc-m.latrobe.edu.au The same procedure works for any other machine where you have an account except that if your Unix computer uses a port other than 22 you will need to specify the port by adding the option -p PORT with PORT substituted with the port number. You may be presented with a message along the lines of: The authenticity of host 'lims-hpc-m.latrobe.edu.au (131.172.36.150)' can't be established. ... Are you sure you want to continue connecting (yes/no)? Although you should never ignore a warning, this particular one is nothing to be concerned about; type yes and then press enter . If all goes well you will be asked to enter your password. Assuming you type the correct username and password the system should then display a welcome message, and then present you with a Unix prompt. If you get this far then you are ready to start entering Unix commands and thus begin using the remote computer. //<![CDATA[<!-- (function(w,d,u){if(!w.$){w._delayed=true;console.info(\"Delaying JQuery calls\");w.readyQ=[];w.bindReadyQ=[];function p(x,y){if(x==\"ready\"){w.bindReadyQ.push(y);}else{w.readyQ.push(x);}};var a={ready:p,bind:p};w.$=w.jQuery=function(f){if(f===d||f===u){return a}else{p(f)}}}})(window,document) //-->]]> //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink0\").click(function(e){ e.preventDefault(); $(\"#showable0\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows On Microsoft Windows (Vista, 7, 8) we recommend that you use the PuTTY ssh client. PuTTY (putty.exe) can be downloaded from this web page: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html Documentation for using PuTTY is here: http://www.chiark.greenend.org.uk/~sgtatham/putty/docs.html When you start PuTTY you should see a window which looks something like this: To connect to LIMS-HPC you should enter lims-hpc-m.latrobe.edu.au into the box entitled \"Host Name (or IP address)\" and 6022 in the port, then click on the Open button. All of the settings should remain the same as they were when PuTTY started (which should be the same as they are in the picture above). In some circumstances you will be presented with a window entitled PuTTY Security Alert. It will say something along the lines of \"The server's host key is not cached in the registry\" . This is nothing to worry about, and you should agree to continue (by clicking on Yes). You usually see this message the first time you try to connect to a particular remote computer. If all goes well, a terminal window will open, showing a prompt with the text \"login as:\" . An example terminal window is shown below. You should type your LIMS-HPC username and press enter. After entering your username you will be prompted for your password. Assuming you type the correct username and password the system should then display a welcome message, and then present you with a Unix prompt. If you get this far then you are ready to start entering Unix commands and thus begin using the remote computer. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink1\").click(function(e){ e.preventDefault(); $(\"#showable1\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Transfer files Click the link below to expand the relevant instructions for your Operating System Note: if you are wanting to transfer files from/to another HPC system, use the Linux instructions and do it directly from either HPC (i.e. first login using SSH/Putty). Mac OS X / Linux Both Mac OS X and Linux come with software that enables you to transfer files to and from LIMS-HPC. There are two commands you can use: scp and rsync . The differences are that the scp command is easier to use and rsync does some verification that transfer was successful. We will use scp here however if you want to use rsync see the Archiving page or the rsync manpage. The scp command works very much like the cp with the only difference being how you specify files on the remote server. Example filenames ## specifying local file(s) ## # full path /home/group/mylab/mydir/myfile.txt # relative file myfile.txt # relative path mydir/myfile.txt # wildcards mydir/*.fa ## specifying a remote file ## # full remote path username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt # if your username is same on both computers you can leave it off lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt # relative file (remote relative files are always relative to your home directory) lims-hpc-m.latrobe.edu.au:myfile.txt lims-hpc-m.latrobe.edu.au:../group/mylab/mydir/myfile.txt Example scp commands The SOURCE_FILE(s) are the files that currently exist and DESTINATION_FILE_OR_DIR is where you want them to be copied. Either the SOURCE or DESTINATION files can be a remote (but not both). As with cp , if you specify multiple source files (or wildcard) the destination must be an existing directory. # structure scp -P 6022 SOURCE_FILES DESTINATION_FILE_OR_DIR # example (1 file) PC to LIMS-HPC scp -P 6022 myfile.txt username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ # example (1 file) LIMS-HPC to PC scp -P 6022 username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt . # example (whole directory) PC to LIMS-HPC scp -P 6022 -r myfiles/ username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ # example (wildcards) PC to LIMS-HPC # wildcards only work on source scp -P 6022 myfiles/*.fa username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ Note: the port option ( -P 6022 ) is only needed when the remote server is LIMS-HPC. If you are transferring files to/from another HPC (from LIMS-HPC) you don't need port 6022. The default port is 22 which most HPCs use. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink2\").click(function(e){ e.preventDefault(); $(\"#showable2\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows As with connecting to LIMS-HPC, Windows requires a third party software package in order to transfer files. We recommend that you use WinSCP Download Software Open the WinSCP Download page in your browser. If you have administrator access on your computer, it is best to download the Installation Package . However, if you are not then get the Portable executables instead. Connecting with WinSCP When you first start WinSCP it will present you with a screen like below. Complete form fields File protocol : SCP Host name : lims-hpc-m.latrobe.edu.au Port number : 6022 User name : Your LIMS-HPC username Password : Your LIMS-HPC password Click Save button (so you don't need to type it in future) Give the session a Site name of LIMS-HPC Click OK button Double-click on LIMS-HPC from the left-hand list. In future, you can skip all above steps. Transferring files Once connected you will be presented with a window resembling below however the files will depend on the files in your computer or LIMS-HPC accounts. The left-hand list of files are those on your PC and the right-hand list are LIMS-HPC . You can browse the directories on each side like you would using the file explorer on your PC. To transfer files from LIMS-HPC to your PC simply drag them from the right-hand list to the left-hand list. To transfer files from your PC to LIMS-HPC drag them left to right. Note: the first time you transfer a file (or directory) you will be asked how to do it; simply accept the window (and tick the box to not show in future if you want) //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink3\").click(function(e){ e.preventDefault(); $(\"#showable3\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Adding the HPC to your file browser To avoid the command line and use the regular graphical user interface, you can add a LIMS-HPC folder to you file browser. Click the link below to expand the relevant instructions for your Operating System Mac OS X Not available yet. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink4\").click(function(e){ e.preventDefault(); $(\"#showable4\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Linux Open your regular file browser (Nautilus in Ubuntu). On the left-hand side at the bottom click Connect to server . Enter the following address: sftp://username@lims-hpc-latrobe.edu.au:6022/home/username, replacing username with your LIMS-HPC username. Click Connect . Enter your password when prompted, then you can navigate your files by clicking around. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink5\").click(function(e){ e.preventDefault(); $(\"#showable5\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows Download Swish and install. Open your file browser and navigate to Computer or This PC (Windows 10). You should see an icon named Swish . Double-click on it to open. On the top bar click Add sftp connection . Complete form fields Host name : lims-hpc-m.latrobe.edu.au Port number : 6022 User name : Your LIMS-HPC username Folder : /home/username Click Connect button, and enter your LIMS-HPC password when prompted You can now navigate your files by clicking around. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink6\").click(function(e){ e.preventDefault(); $(\"#showable6\").toggleClass(\"showable-hidden\"); }); }); //-->]]>","title":"HPC Access"},{"location":"hpc-access/#hpc-access","text":"","title":"HPC Access"},{"location":"hpc-access/#applying-for-an-account","text":"User = task to be completed by LTU Staff/Student requiring access to LIMS-HPC. Lab-head = task to be completed by the LTU lab-head for the lab which user belongs to. User to carefully read archive documentation: Archive Documentation User to carefully read, sign and give to supervisor archive access form: Archive Access Form Lab-head to complete an AskICT \"Unix Research Support\" request (Click AskICT Get Help Research Support Unix Research Support) from AskLaTrobe if User is a staff member select \"Who requires this service?\" = \"Someone Else\" and \"Type their name in the \"Select the staff member for this server box\". For students just leave it as \"Yourself\" Click \"Add attachments\" and select the Archive Access Form provided by User Complete the \"Description of request\" using the template below and the following replacements: FIRSTNAME : user's first/given name NAME : full name of user USERNAME : if the user is a student then this must be their STUDENTS domain username. Otherwise, their LTU domain username. EMAIL : the user's LTU/STUDENTS email address. Optionally you can provide a second alternate email if they want. LABGROUP : Lab-head's surname followed by \"lab\" e.g. smithlab New LIMS-HPC user for FIRSTNAME Name: NAME Username: USERNAME Email: EMAIL Group: LABGROUP Figure : Description of request template","title":"Applying for an account"},{"location":"hpc-access/#connecting","text":"Click the link below to expand the relevant instructions for your Operating System Mac OS X / Linux Both Mac OS X and Linux come with a version of ssh (called OpenSSH) that can be used from the command line. To use OpenSSH you must first start a terminal program on your computer. On OS X the standard terminal is called Terminal, and it is installed by default. On Linux there are many popular terminal programs including: xterm, gnome-terminal, konsole (if you aren't sure, then xterm is a good default). When you've started the terminal you should see a command prompt. To log into LIMS-HPC, for example, type this command at the prompt and press return (where the word username is replaced with your LIMS-HPC username): $ ssh -p 6022 username@lims-hpc-m.latrobe.edu.au The same procedure works for any other machine where you have an account except that if your Unix computer uses a port other than 22 you will need to specify the port by adding the option -p PORT with PORT substituted with the port number. You may be presented with a message along the lines of: The authenticity of host 'lims-hpc-m.latrobe.edu.au (131.172.36.150)' can't be established. ... Are you sure you want to continue connecting (yes/no)? Although you should never ignore a warning, this particular one is nothing to be concerned about; type yes and then press enter . If all goes well you will be asked to enter your password. Assuming you type the correct username and password the system should then display a welcome message, and then present you with a Unix prompt. If you get this far then you are ready to start entering Unix commands and thus begin using the remote computer. //<![CDATA[<!-- (function(w,d,u){if(!w.$){w._delayed=true;console.info(\"Delaying JQuery calls\");w.readyQ=[];w.bindReadyQ=[];function p(x,y){if(x==\"ready\"){w.bindReadyQ.push(y);}else{w.readyQ.push(x);}};var a={ready:p,bind:p};w.$=w.jQuery=function(f){if(f===d||f===u){return a}else{p(f)}}}})(window,document) //-->]]> //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink0\").click(function(e){ e.preventDefault(); $(\"#showable0\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows On Microsoft Windows (Vista, 7, 8) we recommend that you use the PuTTY ssh client. PuTTY (putty.exe) can be downloaded from this web page: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html Documentation for using PuTTY is here: http://www.chiark.greenend.org.uk/~sgtatham/putty/docs.html When you start PuTTY you should see a window which looks something like this: To connect to LIMS-HPC you should enter lims-hpc-m.latrobe.edu.au into the box entitled \"Host Name (or IP address)\" and 6022 in the port, then click on the Open button. All of the settings should remain the same as they were when PuTTY started (which should be the same as they are in the picture above). In some circumstances you will be presented with a window entitled PuTTY Security Alert. It will say something along the lines of \"The server's host key is not cached in the registry\" . This is nothing to worry about, and you should agree to continue (by clicking on Yes). You usually see this message the first time you try to connect to a particular remote computer. If all goes well, a terminal window will open, showing a prompt with the text \"login as:\" . An example terminal window is shown below. You should type your LIMS-HPC username and press enter. After entering your username you will be prompted for your password. Assuming you type the correct username and password the system should then display a welcome message, and then present you with a Unix prompt. If you get this far then you are ready to start entering Unix commands and thus begin using the remote computer. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink1\").click(function(e){ e.preventDefault(); $(\"#showable1\").toggleClass(\"showable-hidden\"); }); }); //-->]]>","title":"Connecting"},{"location":"hpc-access/#transfer-files","text":"Click the link below to expand the relevant instructions for your Operating System Note: if you are wanting to transfer files from/to another HPC system, use the Linux instructions and do it directly from either HPC (i.e. first login using SSH/Putty). Mac OS X / Linux Both Mac OS X and Linux come with software that enables you to transfer files to and from LIMS-HPC. There are two commands you can use: scp and rsync . The differences are that the scp command is easier to use and rsync does some verification that transfer was successful. We will use scp here however if you want to use rsync see the Archiving page or the rsync manpage. The scp command works very much like the cp with the only difference being how you specify files on the remote server. Example filenames ## specifying local file(s) ## # full path /home/group/mylab/mydir/myfile.txt # relative file myfile.txt # relative path mydir/myfile.txt # wildcards mydir/*.fa ## specifying a remote file ## # full remote path username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt # if your username is same on both computers you can leave it off lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt # relative file (remote relative files are always relative to your home directory) lims-hpc-m.latrobe.edu.au:myfile.txt lims-hpc-m.latrobe.edu.au:../group/mylab/mydir/myfile.txt Example scp commands The SOURCE_FILE(s) are the files that currently exist and DESTINATION_FILE_OR_DIR is where you want them to be copied. Either the SOURCE or DESTINATION files can be a remote (but not both). As with cp , if you specify multiple source files (or wildcard) the destination must be an existing directory. # structure scp -P 6022 SOURCE_FILES DESTINATION_FILE_OR_DIR # example (1 file) PC to LIMS-HPC scp -P 6022 myfile.txt username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ # example (1 file) LIMS-HPC to PC scp -P 6022 username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/myfile.txt . # example (whole directory) PC to LIMS-HPC scp -P 6022 -r myfiles/ username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ # example (wildcards) PC to LIMS-HPC # wildcards only work on source scp -P 6022 myfiles/*.fa username@lims-hpc-m.latrobe.edu.au:/home/group/mylab/mydir/ Note: the port option ( -P 6022 ) is only needed when the remote server is LIMS-HPC. If you are transferring files to/from another HPC (from LIMS-HPC) you don't need port 6022. The default port is 22 which most HPCs use. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink2\").click(function(e){ e.preventDefault(); $(\"#showable2\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows As with connecting to LIMS-HPC, Windows requires a third party software package in order to transfer files. We recommend that you use WinSCP Download Software Open the WinSCP Download page in your browser. If you have administrator access on your computer, it is best to download the Installation Package . However, if you are not then get the Portable executables instead. Connecting with WinSCP When you first start WinSCP it will present you with a screen like below. Complete form fields File protocol : SCP Host name : lims-hpc-m.latrobe.edu.au Port number : 6022 User name : Your LIMS-HPC username Password : Your LIMS-HPC password Click Save button (so you don't need to type it in future) Give the session a Site name of LIMS-HPC Click OK button Double-click on LIMS-HPC from the left-hand list. In future, you can skip all above steps. Transferring files Once connected you will be presented with a window resembling below however the files will depend on the files in your computer or LIMS-HPC accounts. The left-hand list of files are those on your PC and the right-hand list are LIMS-HPC . You can browse the directories on each side like you would using the file explorer on your PC. To transfer files from LIMS-HPC to your PC simply drag them from the right-hand list to the left-hand list. To transfer files from your PC to LIMS-HPC drag them left to right. Note: the first time you transfer a file (or directory) you will be asked how to do it; simply accept the window (and tick the box to not show in future if you want) //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink3\").click(function(e){ e.preventDefault(); $(\"#showable3\").toggleClass(\"showable-hidden\"); }); }); //-->]]>","title":"Transfer files"},{"location":"hpc-access/#adding-the-hpc-to-your-file-browser","text":"To avoid the command line and use the regular graphical user interface, you can add a LIMS-HPC folder to you file browser. Click the link below to expand the relevant instructions for your Operating System Mac OS X Not available yet. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink4\").click(function(e){ e.preventDefault(); $(\"#showable4\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Linux Open your regular file browser (Nautilus in Ubuntu). On the left-hand side at the bottom click Connect to server . Enter the following address: sftp://username@lims-hpc-latrobe.edu.au:6022/home/username, replacing username with your LIMS-HPC username. Click Connect . Enter your password when prompted, then you can navigate your files by clicking around. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink5\").click(function(e){ e.preventDefault(); $(\"#showable5\").toggleClass(\"showable-hidden\"); }); }); //-->]]> Windows Download Swish and install. Open your file browser and navigate to Computer or This PC (Windows 10). You should see an icon named Swish . Double-click on it to open. On the top bar click Add sftp connection . Complete form fields Host name : lims-hpc-m.latrobe.edu.au Port number : 6022 User name : Your LIMS-HPC username Folder : /home/username Click Connect button, and enter your LIMS-HPC password when prompted You can now navigate your files by clicking around. //<![CDATA[<!-- $(document).ready(function(){ $(\"#showablelink6\").click(function(e){ e.preventDefault(); $(\"#showable6\").toggleClass(\"showable-hidden\"); }); }); //-->]]>","title":"Adding the HPC to your file browser"},{"location":"hpc-archive/","text":"HPC Archiving This document covers the usage of the Archiving Storage attached to LIMS-HPC. Purpose The Australian Code for the Responsible Conduct of Research requires researchers to make use the archive storage at a research organisation (i.e. La Trobe University) and keep records about such data. La Trobe University's policies specifically reference the Code. Relevant Documents : Australian Code for the Responsible Conduct of Research La Trobe University Policies La Trobe University Research Data Management Policy Glossary Key terms used within this document Project : a directory of related files. These may include multiple collections of data (i.e. multiple sequencing runs) that are related. Active Project : a project that is being worked on within the last 30 days. Inactive Project : a project that has ceased to be active. This might be because of the project coming to an end or being shelved for a period of time. Meta-data : information about your data. Meta-data file : In this context, a text file contained within the top level directory for each project. The purpose of this file is to store a description of the data contained within the project. Computational storage : Storage that is used within jobs (either reading/writing). LIMS-HPC key directories /home/USERNAME : Home directory for the user USERNAME. No data will be stored here; only config files /home/group/LABGROUP : the directory for storing active projects of research group LABGROUP /home/group/LABGROUP/archive : the directory for storing inactive projects of research group LABGROUP /data/genomics-archive : each sequencing run is stored here. Any files within here do NOT need to be archived. If you have sequencing runs from outside providers then you can have them stored here by contacting the Genomics Platform (genomics@latrobe.edu.au) Archive types The Archive storage on LIMS-HPC is used for storing data that is no longer being actively processed. There are two groups of archived projects: Published Data analysis that has been published (or is under review). This data must be cleaned, compressed and have a COMPLETE meta-data file. Once the project is ready it will be locked so that no users can add, change or delete the files within it. A locked project will only be readable for researchers within the labgroup and not changeable. A supplementary sub-directory for each project is used for adding new files/information after the project is locked. Files within here will also be locked when ready. Shelved For projects that have been put on hold for the time being. They can be brought back to the HPC storage (i.e. /home/group/*) when work resumes. Intermediate files must also be removed prior to archiving. Archive directory layout Each labgroup's archive directory contains two sub-directories for the Published and Shelved data. /home/group/LABGROUP/archive/pub : Research projects that result in published data are stored inside the pub directory /home/group/LABGROUP/archive/shelf : Research projects that are temporarily shelved are stored inside the shelf directory Meta-data Items that must be included as a minimum in archived data (metadata.txt) Contacts : Phone, email addresses, department of: Primary : the researchers who created the results/performed research. Supervisor/lab group : Collaborators : Internal and external Approvals : Incoming : A list of approvals that were received by you for use of external data if any. (attach email text if coming via email, best for forward the email then copy all text so it includes the from/to fields) Outgoing : A list of approvals that you have given out for other copies of this research data including contact details and names of persons and for what purpose they were given. Confidentiality/Ethics restrictions : Are there any restrictions on the confidentiality of all or parts of this data. Which parts if any can be given out to others if a request comes from publication? Expiry : NOTE: data should only be deleted if it has no useful purpose. If the expiry data comes around and it's still useful then a new expiry should be set What date should this data be deleted (See section 2.1.1 of r39 of the \"AUSTRALIAN CODE FOR THE RESPONSIBLE CONDUCT OF RESEARCH\" for minimum time frames required). Who is responsible for the disposal (or extension) Note any challenges or allegations of research misconduct that are raised against this research. While unresolved cases remain the results MUST NOT be deleted. References : Lab books and other documentation that describes the data processing and/or wet lab work associated with this data. Publications : Citation and doi/url for any publications that are a result of this data metadata.txt : a template file to use for your projects metadata.txt What to keep Data-wise , the code says you need to keep at least the raw input files, the output results and anything that is not possible to reproduce in your data analysis. You might also want to keep any intermediate results that take a significant time to reproduce. Any dataset that you download from the web to use in your analysis should be archived with your results as it might be hard to recreate the dataset in the future (if the web resource disappears or changes). Meta-data wise, you need to keep all meta-data which includes all your job scripts for each step of your analysis. Don't keep SAM files particularly if you have BAM files of the same contents. When developing your processing pipeline consider a method which produces BAM files directly if possible. Copying data Preparation Prior to transferring you need to cleanup the project directory. See the Best Practices section below for the tasks that should be completed. All FASTQ/A files should be compressed as do any other large text files. When you compress a text file that wasn't compressed when you ran pipeline make sure you document that it was done in a README file so that you remember to decompress it if you need to perform processing again. Transferring The Temporary archive folder in your lab-group is in the same file system as your lab-group so please use the mv command to move the project into your archive directory once it is prepared for archival. # e.g. mv PROJECT_DIR_NAME /home/group/LABGROUP/archive/pub/ # Where PROJECT_DIR_NAME is the top level directory for your project # LABGROUP is the labgroup you belong to. e.g. smithlab Data disposal Data must only be disposed of in accordance with the La Trobe Research Data Retention and Disposal Policy and any other relevant policies. Additionally, when a dataset is disposed of, the project directory and metadata file must remain. A note should be added to the metadata file indicating the date, whom and reason it was deleted. A full directory listing should be stored prior to deletion: ls -lR listing.txt Project best practice To help produce repeatable science and make your life easier when it comes time to archive here are a number of suggestions to use while working on a project. Each step in its own directory Within each project there are commonly multiple processing steps used. It's best practice to create a sub-directory for each step in your analysis. This helps reduce the confusion about files and makes it easier to cleanup and archive. If you add a sequence number to the beginning they order correctly with ls Clean as you go Once you have successfully completed a step in your analysis you should remove any files resulting from earlier failed analysis. Better yet, move all files from this step out of the way (i.e. to a subdirectory called 'old') and repeat the steps you used to achieve a successful result. This makes sure you are able to repeat the analysis. When finished you can remove the old files. Maintain metadata.txt Create the metadata.txt file when you start a project and complete it as you go along. As a minimum you should put your contact details in there and document the source (and any approvals for) data. Don't link between projects You should resist the urge to create links from one project to another as this will result in dead links if one project is archived before another. If two projects share the same data then you can apply to have the data stored in the genomics platform archive and link to it there. Background When using data within your project it's best practice to use symbolic links to grab the source data from the genomics platform archive instead of making a copy to your project. There are two types of symbolic links : (1) relative and (2) absolute and are differentiated by whether you use a relative path or absolute path when creating the link. When should you use each ? Absolute : When linking to files or directories outside of the current project directory. e.g. linking your nextgen sequence data to your projects source data. mkdir 00-raw; cd 00-raw; ln -s /data/genomics-archive/RUNID/Unaligned/sample1.fq.gz . Relative : When linking to files or directories inside your current project. e.g. you might want to create a subset of your samples for testing. This would allow you to use a file regex to select the input files to your command \" testset/*.fq.gz \" cd 00-raw; mkdir testset; cd testset; ln -s ../sample2.fq.gz . Read-only It's a good idea to make your files read-only once they are successful to help prevent data-loss when you do a recursive delete in the wrong place. NOTE: this will NOT protect you from the rm -f. # individual file(s) chmod a-w FILENAME # whole directory chmod a-w -R DIRECTORYNAME Another helpful hint is to create a file named '0' in directories that contain valuable files and make this read-only. This will cause rm -r ... to prompt before deleting it so if you accidentally try to delete the directory then this can help save you (by pressing CTRL + C to terminate the command). touch 0; chmod a-w 0;","title":"HPC Archiving"},{"location":"hpc-archive/#hpc-archiving","text":"This document covers the usage of the Archiving Storage attached to LIMS-HPC.","title":"HPC Archiving"},{"location":"hpc-archive/#purpose","text":"The Australian Code for the Responsible Conduct of Research requires researchers to make use the archive storage at a research organisation (i.e. La Trobe University) and keep records about such data. La Trobe University's policies specifically reference the Code. Relevant Documents : Australian Code for the Responsible Conduct of Research La Trobe University Policies La Trobe University Research Data Management Policy","title":"Purpose"},{"location":"hpc-archive/#glossary","text":"Key terms used within this document Project : a directory of related files. These may include multiple collections of data (i.e. multiple sequencing runs) that are related. Active Project : a project that is being worked on within the last 30 days. Inactive Project : a project that has ceased to be active. This might be because of the project coming to an end or being shelved for a period of time. Meta-data : information about your data. Meta-data file : In this context, a text file contained within the top level directory for each project. The purpose of this file is to store a description of the data contained within the project. Computational storage : Storage that is used within jobs (either reading/writing).","title":"Glossary"},{"location":"hpc-archive/#lims-hpc-key-directories","text":"/home/USERNAME : Home directory for the user USERNAME. No data will be stored here; only config files /home/group/LABGROUP : the directory for storing active projects of research group LABGROUP /home/group/LABGROUP/archive : the directory for storing inactive projects of research group LABGROUP /data/genomics-archive : each sequencing run is stored here. Any files within here do NOT need to be archived. If you have sequencing runs from outside providers then you can have them stored here by contacting the Genomics Platform (genomics@latrobe.edu.au)","title":"LIMS-HPC key directories"},{"location":"hpc-archive/#archive-types","text":"The Archive storage on LIMS-HPC is used for storing data that is no longer being actively processed. There are two groups of archived projects:","title":"Archive types"},{"location":"hpc-archive/#published","text":"Data analysis that has been published (or is under review). This data must be cleaned, compressed and have a COMPLETE meta-data file. Once the project is ready it will be locked so that no users can add, change or delete the files within it. A locked project will only be readable for researchers within the labgroup and not changeable. A supplementary sub-directory for each project is used for adding new files/information after the project is locked. Files within here will also be locked when ready.","title":"Published"},{"location":"hpc-archive/#shelved","text":"For projects that have been put on hold for the time being. They can be brought back to the HPC storage (i.e. /home/group/*) when work resumes. Intermediate files must also be removed prior to archiving.","title":"Shelved"},{"location":"hpc-archive/#archive-directory-layout","text":"Each labgroup's archive directory contains two sub-directories for the Published and Shelved data. /home/group/LABGROUP/archive/pub : Research projects that result in published data are stored inside the pub directory /home/group/LABGROUP/archive/shelf : Research projects that are temporarily shelved are stored inside the shelf directory","title":"Archive directory layout"},{"location":"hpc-archive/#meta-data","text":"Items that must be included as a minimum in archived data (metadata.txt) Contacts : Phone, email addresses, department of: Primary : the researchers who created the results/performed research. Supervisor/lab group : Collaborators : Internal and external Approvals : Incoming : A list of approvals that were received by you for use of external data if any. (attach email text if coming via email, best for forward the email then copy all text so it includes the from/to fields) Outgoing : A list of approvals that you have given out for other copies of this research data including contact details and names of persons and for what purpose they were given. Confidentiality/Ethics restrictions : Are there any restrictions on the confidentiality of all or parts of this data. Which parts if any can be given out to others if a request comes from publication? Expiry : NOTE: data should only be deleted if it has no useful purpose. If the expiry data comes around and it's still useful then a new expiry should be set What date should this data be deleted (See section 2.1.1 of r39 of the \"AUSTRALIAN CODE FOR THE RESPONSIBLE CONDUCT OF RESEARCH\" for minimum time frames required). Who is responsible for the disposal (or extension) Note any challenges or allegations of research misconduct that are raised against this research. While unresolved cases remain the results MUST NOT be deleted. References : Lab books and other documentation that describes the data processing and/or wet lab work associated with this data. Publications : Citation and doi/url for any publications that are a result of this data metadata.txt : a template file to use for your projects metadata.txt","title":"Meta-data"},{"location":"hpc-archive/#what-to-keep","text":"Data-wise , the code says you need to keep at least the raw input files, the output results and anything that is not possible to reproduce in your data analysis. You might also want to keep any intermediate results that take a significant time to reproduce. Any dataset that you download from the web to use in your analysis should be archived with your results as it might be hard to recreate the dataset in the future (if the web resource disappears or changes). Meta-data wise, you need to keep all meta-data which includes all your job scripts for each step of your analysis. Don't keep SAM files particularly if you have BAM files of the same contents. When developing your processing pipeline consider a method which produces BAM files directly if possible.","title":"What to keep"},{"location":"hpc-archive/#copying-data","text":"","title":"Copying data"},{"location":"hpc-archive/#preparation","text":"Prior to transferring you need to cleanup the project directory. See the Best Practices section below for the tasks that should be completed. All FASTQ/A files should be compressed as do any other large text files. When you compress a text file that wasn't compressed when you ran pipeline make sure you document that it was done in a README file so that you remember to decompress it if you need to perform processing again.","title":"Preparation"},{"location":"hpc-archive/#transferring","text":"The Temporary archive folder in your lab-group is in the same file system as your lab-group so please use the mv command to move the project into your archive directory once it is prepared for archival. # e.g. mv PROJECT_DIR_NAME /home/group/LABGROUP/archive/pub/ # Where PROJECT_DIR_NAME is the top level directory for your project # LABGROUP is the labgroup you belong to. e.g. smithlab","title":"Transferring"},{"location":"hpc-archive/#data-disposal","text":"Data must only be disposed of in accordance with the La Trobe Research Data Retention and Disposal Policy and any other relevant policies. Additionally, when a dataset is disposed of, the project directory and metadata file must remain. A note should be added to the metadata file indicating the date, whom and reason it was deleted. A full directory listing should be stored prior to deletion: ls -lR listing.txt","title":"Data disposal"},{"location":"hpc-archive/#project-best-practice","text":"To help produce repeatable science and make your life easier when it comes time to archive here are a number of suggestions to use while working on a project.","title":"Project best practice"},{"location":"hpc-archive/#each-step-in-its-own-directory","text":"Within each project there are commonly multiple processing steps used. It's best practice to create a sub-directory for each step in your analysis. This helps reduce the confusion about files and makes it easier to cleanup and archive. If you add a sequence number to the beginning they order correctly with ls","title":"Each step in its own directory"},{"location":"hpc-archive/#clean-as-you-go","text":"Once you have successfully completed a step in your analysis you should remove any files resulting from earlier failed analysis. Better yet, move all files from this step out of the way (i.e. to a subdirectory called 'old') and repeat the steps you used to achieve a successful result. This makes sure you are able to repeat the analysis. When finished you can remove the old files.","title":"Clean as you go"},{"location":"hpc-archive/#maintain-metadatatxt","text":"Create the metadata.txt file when you start a project and complete it as you go along. As a minimum you should put your contact details in there and document the source (and any approvals for) data.","title":"Maintain metadata.txt"},{"location":"hpc-archive/#dont-link-between-projects","text":"You should resist the urge to create links from one project to another as this will result in dead links if one project is archived before another. If two projects share the same data then you can apply to have the data stored in the genomics platform archive and link to it there.","title":"Don't link between projects"},{"location":"hpc-archive/#background","text":"When using data within your project it's best practice to use symbolic links to grab the source data from the genomics platform archive instead of making a copy to your project. There are two types of symbolic links : (1) relative and (2) absolute and are differentiated by whether you use a relative path or absolute path when creating the link. When should you use each ? Absolute : When linking to files or directories outside of the current project directory. e.g. linking your nextgen sequence data to your projects source data. mkdir 00-raw; cd 00-raw; ln -s /data/genomics-archive/RUNID/Unaligned/sample1.fq.gz . Relative : When linking to files or directories inside your current project. e.g. you might want to create a subset of your samples for testing. This would allow you to use a file regex to select the input files to your command \" testset/*.fq.gz \" cd 00-raw; mkdir testset; cd testset; ln -s ../sample2.fq.gz .","title":"Background"},{"location":"hpc-archive/#read-only","text":"It's a good idea to make your files read-only once they are successful to help prevent data-loss when you do a recursive delete in the wrong place. NOTE: this will NOT protect you from the rm -f. # individual file(s) chmod a-w FILENAME # whole directory chmod a-w -R DIRECTORYNAME Another helpful hint is to create a file named '0' in directories that contain valuable files and make this read-only. This will cause rm -r ... to prompt before deleting it so if you accidentally try to delete the directory then this can help save you (by pressing CTRL + C to terminate the command). touch 0; chmod a-w 0;","title":"Read-only"},{"location":"hpc-update/","text":"HPC Updates This document covers changes to the way we use LIMS-HPC Group directories There are group directories for every user on the system. They are located in the /home/group/LABGROUP where LABGROUP is usually the labhead's surname followed by 'lab' e.g. /home/group/whelanlab. Each lab group is restricted to only users who are in the labgroup. No home dir data No data should be stored or processed within your home directory (e.g. /home/USERNAME). While it works, it makes it difficult to cleanup/archive and for you to get help debugging your work. Fair usage Please be fair and not request more that 32 cores. Partitions 8hour : For small jobs requiring less than 8 hours of time to compute. You should not use more than 8 cores. It has access to all nodes of the HPC so should always be able to run a job (unless it's really busy) Compute : Regular jobs up to 7 days of compute. It has access to most nodes. Long : For jobs that are going to take a long time to complete; maximum is 200 days Bigmem : For jobs that require more than 128GB of memory (and hence need node 1) Time extensions I can extend your jobs time setting if it looks like it won't finish in time up to 2x the maximum for its queue. The exception to this is Node 1 which I will not extend as it is a specialist node and needs to be available for bigmem jobs. To get this, please email your job number and expected time it will require to Genomics Platform genomics@latrobe.edu.au NTasks The --ntasks option regularly gets used instead of --cpus-per-task . If you are running programs one at a time then you should be using --cpus-per-task . While it may produce the same result, the consequence of using --ntasks is that SLURM could give you some CPUs on one node and the rest on another which your scripts are not likely to be able to support. #!/bin/bash #SBATCH --share #SBATCH --ntasks=1 #SBATCH --cpus-per-task=8 #SBATCH --mem-per-cpu=1024 #SBATCH --partition=8hour #SBATCH --time=08:00 echo Starting: $(date) some-awesome-program --threads=8 input.fa output.txt echo Finished: $(date) Figure : example slurm script requesting 8 cores on a single node, for 8 hours, with 8GB of memory Job monitoring Munin Munin is a webpage that shows graphs CPU usage over time. It can be accessed from the following webpage: http://munin-lims.latrobe.edu.au/lims-hpc.html It is good for tracking how your job used the CPU over time however it only shows the whole node usage so in some situations it is hard to tell who used what. If you click on one the graphs you can see the usage over longer time frames. Top top us a unix command that shows the current usage of CPU and Memory of each process running on the current node. You will need to login to the compute nodes to see your job's usage. See the \"Topic 4: Job Monitoring\" section in the HPC Workshop material for more details on using top. To setup node login see LIMS-HPC Node Login Setup Is it correct? Make sure you check your job is running correctly when it starts and at regular intervals.","title":"HPC Updates"},{"location":"hpc-update/#hpc-updates","text":"This document covers changes to the way we use LIMS-HPC","title":"HPC Updates"},{"location":"hpc-update/#group-directories","text":"There are group directories for every user on the system. They are located in the /home/group/LABGROUP where LABGROUP is usually the labhead's surname followed by 'lab' e.g. /home/group/whelanlab. Each lab group is restricted to only users who are in the labgroup.","title":"Group directories"},{"location":"hpc-update/#no-home-dir-data","text":"No data should be stored or processed within your home directory (e.g. /home/USERNAME). While it works, it makes it difficult to cleanup/archive and for you to get help debugging your work.","title":"No home dir data"},{"location":"hpc-update/#fair-usage","text":"Please be fair and not request more that 32 cores.","title":"Fair usage"},{"location":"hpc-update/#partitions","text":"8hour : For small jobs requiring less than 8 hours of time to compute. You should not use more than 8 cores. It has access to all nodes of the HPC so should always be able to run a job (unless it's really busy) Compute : Regular jobs up to 7 days of compute. It has access to most nodes. Long : For jobs that are going to take a long time to complete; maximum is 200 days Bigmem : For jobs that require more than 128GB of memory (and hence need node 1)","title":"Partitions"},{"location":"hpc-update/#time-extensions","text":"I can extend your jobs time setting if it looks like it won't finish in time up to 2x the maximum for its queue. The exception to this is Node 1 which I will not extend as it is a specialist node and needs to be available for bigmem jobs. To get this, please email your job number and expected time it will require to Genomics Platform genomics@latrobe.edu.au","title":"Time extensions"},{"location":"hpc-update/#ntasks","text":"The --ntasks option regularly gets used instead of --cpus-per-task . If you are running programs one at a time then you should be using --cpus-per-task . While it may produce the same result, the consequence of using --ntasks is that SLURM could give you some CPUs on one node and the rest on another which your scripts are not likely to be able to support. #!/bin/bash #SBATCH --share #SBATCH --ntasks=1 #SBATCH --cpus-per-task=8 #SBATCH --mem-per-cpu=1024 #SBATCH --partition=8hour #SBATCH --time=08:00 echo Starting: $(date) some-awesome-program --threads=8 input.fa output.txt echo Finished: $(date) Figure : example slurm script requesting 8 cores on a single node, for 8 hours, with 8GB of memory","title":"NTasks"},{"location":"hpc-update/#job-monitoring","text":"","title":"Job monitoring"},{"location":"hpc-update/#munin","text":"Munin is a webpage that shows graphs CPU usage over time. It can be accessed from the following webpage: http://munin-lims.latrobe.edu.au/lims-hpc.html It is good for tracking how your job used the CPU over time however it only shows the whole node usage so in some situations it is hard to tell who used what. If you click on one the graphs you can see the usage over longer time frames.","title":"Munin"},{"location":"hpc-update/#top","text":"top us a unix command that shows the current usage of CPU and Memory of each process running on the current node. You will need to login to the compute nodes to see your job's usage. See the \"Topic 4: Job Monitoring\" section in the HPC Workshop material for more details on using top. To setup node login see LIMS-HPC Node Login Setup","title":"Top"},{"location":"hpc-update/#is-it-correct","text":"Make sure you check your job is running correctly when it starts and at regular intervals.","title":"Is it correct?"},{"location":"materials/","text":"Supporting materials for workshops CLC Genomics Slides 1 Slides 2","title":"Support files"},{"location":"materials/#supporting-materials-for-workshops","text":"","title":"Supporting materials for workshops"},{"location":"materials/#clc-genomics","text":"Slides 1 Slides 2","title":"CLC Genomics"}]}